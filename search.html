<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Search Results</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .glass{background:rgba(255,255,255,.08);backdrop-filter:blur(14px);border:1px solid rgba(255,255,255,.12)}
  </style>
</head>
<body class="min-h-screen bg-slate-950 text-white">
  <div class="max-w-6xl mx-auto px-4 py-8">
    <div class="flex items-center justify-between">
      <a href="/" class="text-xl font-bold">← Back</a>
      <div class="text-sm text-slate-300" id="meta"></div>
    </div>

    <div class="mt-6 grid gap-4" id="list"></div>
  </div>

<script>
  const qs = new URLSearchParams(location.search);
  const locationName = qs.get("location") || "Hyderabad";
  const from = qs.get("from");
  const to = qs.get("to");
  document.getElementById("meta").innerText = `${locationName} • ${from} → ${to}`;

  async function load(){
    const res = await fetch(`/api/search?location=${encodeURIComponent(locationName)}&from=${from}&to=${to}`);
    const data = await res.json();

    const list = document.getElementById("list");
    list.innerHTML = "";

    data.hotels.forEach(h => {
      const el = document.createElement("div");
      el.className = "glass rounded-3xl p-5 flex items-center justify-between gap-6";
      el.innerHTML = `
        <div>
          <div class="text-2xl font-semibold">${h.name}</div>
          <div class="text-slate-300 text-sm mt-1">${h.address}</div>
          <div class="text-slate-200 text-sm mt-3">
            <span class="px-3 py-1 rounded-full bg-emerald-500/20 border border-emerald-400/20">
              Available: ${h.available_rooms}
            </span>
            <span class="ml-2 px-3 py-1 rounded-full bg-white/10 border border-white/10">
              Today Price: ₹${Math.round(h.today_price || 0)}
            </span>
          </div>
        </div>
        <button class="rounded-2xl bg-white text-slate-950 font-semibold px-5 py-3 hover:opacity-90"
          onclick="openHotel('${h.code}')">
          View Rooms
        </button>
      `;
      list.appendChild(el);
    });
  }

  function openHotel(code){
    window.location.href = `/property.html?code=${code}&from=${from}&to=${to}`;
  }

  load();
</script>
</body>
</html>
